<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>TestWizardry - Accepted</title>

		<link rel="preconnect" href="https://fonts.gstatic.com">
		<link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="style.css"/>

		<script>
			var player_surname = "Potter";
			var player_title = "Mr.";

			console.log(document.cookie);

			function getCookies()
			{
				var cookies = {};

				for (var cookie of document.cookie.split(';'))
				{
					var [key, value] = cookie.trim().split("=");
					cookies[key] = value;
				}

				return cookies;
			}


			function getPlayerInfo()
			{
				var cookies = getCookies();
				console.log("cookies", cookies);
				console.log("player_gender", cookies.player_gender);

				var salutation;
				var wizard_or_witch;
				var first_name;
				var last_name;

				var name = cookies.player_name.split(' ', 2);
				console.log(name);
				first_name = name[0];
				last_name = name[1];

				if (cookies.player_gender == "male") {
					salutation = "Mister";
					wizard_or_witch = "wizard";
				}

				if (cookies.player_gender == "female") {
					salutation = "Miss";
					wizard_or_witch = "wizard";
				}

				document.cookie = "player_salutation=" + salutation;
				document.cookie = "player_wizardorwitch=" + wizard_or_witch;
				document.cookie = "player_salutation=" + salutation;

				if (cookies.player_name.split(' '))
				setSalutation(salutation);
				setSurname(last_name);
			}
			
			function setSalutation(salutation)
			{
				console.log("setSalutation", salutation)
				var element  = document.getElementById("salutation");
				console.log(element);
				element.innerText = salutation;

			}

			function setSurname(surname)
			{
				console.log("setSurname", surname);
				var element  = document.getElementById("surname");
				console.log(element);
				element.innerText = surname;
			}

			document.addEventListener("DOMContentLoaded", getPlayerInfo);
		</script>
	</head>
	<body>
		<div class="page">
			<h1>Test Wizardry</h1>

			<h2> Congratulations, you've been accepted to Hogwarts School of Witchcraft & Wizardry</h2>

			<div class="letter">
				<p>
					Dear 
					<span id="salutation">
						[Mister / Miss]
					</span>
					<span id="surname">
						[Surname]
					</span>
				</p>
				<p>
					We are pleased to inform you that you have been accepted at Hogwart's School of Witchcraft and Wizardry. Please find enclosed a list of all necessary books and equipment.
					Term begins on 1 September. We await your owl by no later than 31 July.
				</p>
				<p>
					Yours sincerely,
				</p>
				<p>
					Minerva McGonagall
				</p>
				<p>
					Deputy Headmistress
				</p>
				<p>
					HOGWARTS SCHOOL of WITCHCRAFT and WIZARDRY
				</p>	
			</div>

			<p>
				But there's no time to celebrate, it's off to Diagon Alley to fetch your school supplies.
				<a class="button" href="diagon-alley.html">Go to Diagon Alley</a>
			</p>

		</div>]
	</body>
</html>
